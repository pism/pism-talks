\documentclass[hide notes,intlimits]{beamer}

\mode<presentation>
{
  \usetheme[footline,headline]{PISMshade}
  \setbeamercovered{transparent}
}

% load packages
\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[multidot]{grffile}

\usepackage{tikz}
\usetikzlibrary{shapes,arrows,shadows, calc}

\definecolor{dark red}{HTML}{E41A1C}
\definecolor{dark green}{HTML}{4DAF4A}
\definecolor{dark violet}{HTML}{984EA3}
\definecolor{dark blue}{HTML}{084594}
\definecolor{dark orange}{HTML}{FF7F00}
\definecolor{light blue}{HTML}{377EB8}
\definecolor{light red}{HTML}{FB9A99}
\definecolor{light violet}{HTML}{CAB2D6}

\definecolor{uaf red}{HTML}{E41A1C}
\definecolor{uaf blue}{HTML}{377EB8}
\definecolor{uaf green}{HTML}{4DAF4A}
\definecolor{uaf violet}{HTML}{984EA3}
\definecolor{uaf orange}{HTML}{FF7F00}
\setbeamercolor{boxed}{fg=black,bg=uaf yellow}

\graphicspath{{figures/}}

\setbeamerfont{caption}{size=\scriptsize}

% code adapted from http://tex.stackexchange.com/a/11483/3954

% some parameters for customization
\def\shadowshift{3pt,-3pt}
\def\shadowradius{6pt}

\colorlet{innercolor}{black!60}
\colorlet{outercolor}{gray!05}

% this draws a shadow under a rectangle node
\newcommand\drawshadow[1]{
    \begin{pgfonlayer}{shadow}
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$) circle (\shadowradius);
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) circle (\shadowradius);
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) circle (\shadowradius);
        \shade[outercolor,inner color=innercolor,outer color=outercolor] ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,-\shadowradius/2)$) circle (\shadowradius);
        \shade[top color=innercolor,bottom color=outercolor] ($(#1.south west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) rectangle ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
        \shade[left color=innercolor,right color=outercolor] ($(#1.south east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
        \shade[bottom color=innercolor,top color=outercolor] ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$);
        \shade[outercolor,right color=innercolor,left color=outercolor] ($(#1.south west)+(\shadowshift)+(-\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north west)+(\shadowshift)+(\shadowradius/2,-\shadowradius/2)$);
        \filldraw ($(#1.south west)+(\shadowshift)+(\shadowradius/2,\shadowradius/2)$) rectangle ($(#1.north east)+(\shadowshift)-(\shadowradius/2,\shadowradius/2)$);
    \end{pgfonlayer}
}

% create a shadow layer, so that we don't need to worry about overdrawing other things
\pgfdeclarelayer{shadow} 
\pgfsetlayers{shadow,main}

\newsavebox\mybox
\newlength\mylen

\newcommand\shadowimage[2][]{%
\setbox0=\hbox{\includegraphics[#1]{#2}}
\setlength\mylen{\wd0}
\ifnum\mylen<\ht0
\setlength\mylen{\ht0}
\fi
\divide \mylen by 120
\def\shadowshift{\mylen,-\mylen}
\def\shadowradius{\the\dimexpr\mylen+\mylen+\mylen\relax}
\begin{tikzpicture}
\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics[#1]{#2}};
\drawshadow{image}
\end{tikzpicture}}

\newcommand\shadowimagec[3][]{%
\setbox0=\hbox{\includegraphics<#1>[#2]{#3}}
\setlength\mylen{\wd0}
\ifnum\mylen<\ht0
\setlength\mylen{\ht0}
\fi
\divide \mylen by 120
\def\shadowshift{\mylen,-\mylen}
\def\shadowradius{\the\dimexpr\mylen+\mylen+\mylen\relax}
\begin{tikzpicture}
\node[anchor=south west,inner sep=0] (image) at (0,0) {\includegraphics<#1>[#2]{#3}};
\drawshadow{image}
\end{tikzpicture}}


\newenvironment{transbox}[1][]{%
\begin{tikzpicture}
\node[drop shadow,rounded corners,text width=\textwidth,fill=white, fill opacity=#1,text opacity=1] \bgroup
}{
\egroup;\end{tikzpicture}} 

\newenvironment{transbox-tight}{%
\begin{tikzpicture}
\node[drop shadow,rounded corners,fill=uaf yellow, fill opacity=0.75,text opacity=1] \bgroup
}{
\egroup;\end{tikzpicture}} 


% title page
\title[] % (optional, use only with long paper titles)
%{High resolution modeling of the Greenland Ice Sheet}
{Understanding Rapidly-changing Ice Sheets with Models at Scale}

%\subtitle{using the Parallel Ice Sheet Model (PISM)}


\author[Aschwanden, Fahnestock, Truffer] % (optional, use only with lots of authors)
{Andy Aschwanden ($\to$ Ed Bueler)}
% - Give the names in the same order as the appear in the paper.
% - Use the \inst{?} command only if the authors have different
%   affiliation.

\institute[Geophysical Institute] % (optional, but mostly needed)
{}
% - Use the \inst command only if there are several affiliations.
% - Keep it simple, no one is interested in your street address.

\titlegraphic{\vskip-0.5cm\includegraphics[width=\textwidth]{gris-nw-speed-exp-600m}}

\date{}

\begin{document}

% define what is shown at the beginning of each section
\AtBeginSection[]
{
  \begin{frame}<handout:0>
    \frametitle{Outline}
   \tableofcontents[currentsection,subsectionstyle=hide/hide/hide]
  \end{frame}
}

% define what is shown at the beginning of each subsection
\AtBeginSubsection[]
{
 \begin{frame}<beamer>
  \frametitle{Outline}
   \tableofcontents[currentsection,currentsubsection]
 \end{frame}
}

\setbeamertemplate{background canvas}
  {
     \tikz{\node[inner sep=0pt,opacity=1.0] {\includegraphics[width=\paperwidth]{pism_beamer_shade_bg}};}
} 


% insert titlepage
\begin{frame}
  \titlepage
\end{frame}

\setbeamertemplate{background canvas}
{
%
} 

\setbeamertemplate{background canvas}
  {
     \tikz{\node[inner sep=0pt,opacity=0.4] {\includegraphics[width=\paperwidth,height=\paperheight]{jakobshavn_landsat8}};}
} 

\begin{frame}[plain]
    \begin{itemize}
    \item Over the past decades, the Greenland Ice Sheet has been losing mass at an accelerating rate, raising global mean sea level
    \item The Greenland Ice Sheet is $1200\,\text{km}\,\times 2400\,\text{km}$ and has $\sim$7.2 m sea-level equivalent
    \end{itemize}
    \begin{figure}
      \includegraphics[width=12cm]{grace_greenland_2004_2012_still_print} \\
  \end{figure}
\end{frame}


\begin{frame}[plain]
    \begin{itemize}
    \item Ice discharge to the ocean mainly occurs through Greenland's 200+ \emph{outlet glaciers}
    \item Outlet glaciers are fast ($>$200\,m/yr), bedrock-controlled, flows terminating in narrow fjords ($<$10\,km wide)
    \end{itemize}
    \begin{center}
      \includegraphics<1>[width=8.5cm]{jako-front-positions}
      \only<2>{FIXME}
    \end{center}
\end{frame}

%\begin{frame}[plain]
%    \begin{itemize}
%    \item Outlet glaciers are fast-flowing ($>$200\,m/yr) topographically-controlled features terminating in narrow fjords $\sim\le$10\,km wide.
%    \end{itemize}
%    \begin{figure}
%      %\includegraphics[width=9.5cm]{jako-gl}
%      FIXME
%  \end{figure}
%\end{frame}
 

\begin{frame}[plain]

\begin{itemize}
\item Flow speeds vary over several orders of magnitude
\item Over a few kilometers
\end{itemize}

\vspace{-5mm}
  \begin{columns}
    \column[c]{5.5cm}
    \begin{figure}
      \includegraphics[width=\textwidth]{greenland-obs-overview}
    \end{figure}
    \column[c]{6cm}
    Jakobshavn Isbr{\ae}:
    
    \medskip
    \includegraphics[width=\textwidth]{jakobshavn-obs-nogate}
  \end{columns}
\end{frame}


%\setbeamertemplate{background canvas}
%  {
%     \tikz{\node[inner sep=0pt,opacity=.3] %{\includegraphics[height=\paperheight,width=\paperwidth]{grn_iss}};}
%} 




\setbeamertemplate{background canvas}
{
%
} 


\begin{frame}{modeling challenges}

\begin{itemize}
\item challenges in explaining variability of outlet glaciers:
      \begin{itemize}
      \item[$\circ$] \emph{resolution}:  must be high enough to resolve fjords
      \item[$\circ$] \emph{geometric data}: ice thickness is key to flow speed
      \end{itemize}
\item result: until recently, models failed to capture outlet glaciers
\end{itemize}

  \begin{columns}
    \column[c]{4cm}
    \emph{observed}

\medskip
    \includegraphics[width=\textwidth]{jakobshavn-obs-nogate}
    \column[c]{4cm}
    \emph{simulated circa 2009}

\medskip
    \includegraphics[width=\textwidth]{jakobshavn-speed-exp-4500m-ba01}
  \end{columns}
\end{frame}


\begin{frame}{progress}

\begin{itemize}
\item due to:
    \begin{itemize}
    \item[$\circ$] model improvements (parallelism, better physics, etc)
    \item[$\circ$] many NASA airplane-based ice-penetrating-radar flights \dots gives improved map of bedrock under ice
    \end{itemize}
\end{itemize}

  \begin{figure}
    \small{Bamber (2001) \hspace{5em} Morlighem (2014)}
    \includegraphics[width=11cm]{jako_bed}
 \end{figure}
\end{frame}


\begin{frame}{Parallel Ice Sheet Model (PISM)}
  \begin{itemize}
  \item open-source, fully-parallel from initiation in 2006
  \item primary development at UAF, with global user base
  \item sustained NASA support \tiny (NAG5-11371, NNX09AJ38C, NNX13AM16G, NNX13AK27G)
  \end{itemize}
  \begin{columns}
    \column[c]{4.75cm}
    \begin{figure}
      \includegraphics[width=\textwidth]{pism-uaf-publications}
    \end{figure}
    \column[c]{6.25cm}
    \includegraphics<1>[width=\textwidth]{pism-users}
  \end{columns}
\end{frame}


\begin{frame}{}
  \begin{block}{Access to local HPC resources is crucial for the UAF PISM team}
    \begin{itemize}
    \item fast, iterative code development and testing
    \item constant scaling and performance analysis during development
    \item result is cutting edge science
       \begin{itemize}
       \item[$\circ$] UAF PISM team published results in \emph{Nature Communications} 2016 (below)
       \item[$\circ$] 11 other PISM-using publications in \emph{Science, Nature, PNAS} journals
       \end{itemize}
    \end{itemize}
  \end{block}

\begin{center}
    \includegraphics[width=0.7\textwidth]{jakobshavn-beds}
    \\ \hfill \scriptsize adapted from Aschwanden, Fahnestock, \& Truffer, 2016
\end{center}
\end{frame}



%\begin{frame}{The importance of model resolution}
%  \begin{figure}
%    \includegraphics[width=\textwidth]{jakobshavn-beds}
%    \\ \small adapted from Aschwanden, Fahnestock, Truffer (Nature Communiations, 2016)
%  \end{figure}
%\end{frame}


\begin{frame}{Computational aspects}
  To resolve outlet glacier flow, horizontal grid resolutions $\le$1\,km (ideally $\le$500\,m) are needed
  \begin{itemize}
  \item on current UAF HPC resources, a 100 year long simulation at 600\,m resolution takes $\sim$ 120 wall clock hours on 500 cores
  \item only selected simulations can be run at the required resolutions
  \item PISM simulations would benefit from
    \begin{itemize}
    \item more cores: higher resolutions
  \item faster CPU's: reduced integration times for long simulations
  \end{itemize}
\end{itemize}
\end{frame}


\end{document}
